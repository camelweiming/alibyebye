<?xml version="1.0" encoding="UTF-8" ?>
<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN" "http://mybatis.org/dtd/mybatis-3-mapper.dtd" >
<mapper namespace="com.abb.bye.mapper.ProgrammeMapper">

    <insert id="insert" parameterType="com.abb.bye.client.domain.ProgrammeDO" useGeneratedKeys="true" keyProperty="id">
        insert into
        programme(gmt_create,gmt_modified,title,release_year,img,types,directors,performers,languages,alias,seconds,score,imdb,summary,areas,season,total_episode,status,attributes,tags,unique_key,sites,keywords,categories)
        values
        (now(),now(),#{title},#{releaseYear},#{img},#{types},#{directors},#{performers},#{languages},#{alias},#{seconds},#{score},#{imdb},#{summary},#{areas},#{season},#{totalEpisode},#{status},#{attributes},#{tags},#{uniqueKey},#{sites},#{keywords},#{categories})
    </insert>

    <insert id="copyFromSource" parameterType="com.abb.bye.client.domain.ProgrammeDO" useGeneratedKeys="true" keyProperty="id">
        insert ignore into
        programme(gmt_create,gmt_modified,title,release_year,img,types,directors,performers,languages,alias,seconds,score,imdb,summary,areas,season,total_episode,status,attributes,tags,unique_key,sites,keywords,categories)
        values
        (now(),now(),#{title},#{releaseYear},#{img},#{types},#{directors},#{performers},#{languages},#{alias},#{seconds},#{score},#{imdb},#{summary},#{areas},#{season},#{totalEpisode},#{status},#{attributes},#{tags},#{uniqueKey},#{sites},#{keywords},#{categories})
        ON DUPLICATE KEY UPDATE
        gmt_modified=now(),
        img=#{img},
        types=#{types},
        score=#{score},
        imdb=#{imdb},
        alias=#{alias},
        season=#{season},
        categories=#{categories},
        total_episode=#{totalEpisode}
    </insert>

    <sql id="queryColumns">
        gmt_create,gmt_modified,title,release_year,img,types,directors,performers,languages,alias,seconds,score,imdb,summary,areas,season,total_episode,status,attributes,tags,unique_key,sites,keywords,categories
    </sql>

    <select id="get" parameterType="long" resultType="com.abb.bye.client.domain.ProgrammeDO">
        select
        <include refid="queryColumns"/>
        from programme where id=#{id}
    </select>
</mapper>